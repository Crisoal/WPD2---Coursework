<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Student Dashboard</title>
        <meta name="description" content="Your description goes here.">
        <meta name="keywords" content="keyword1, keyword2, keyword3">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
        <script src="https://kit.fontawesome.com/4eb0e146e9.js"
                crossorigin="anonymous"></script>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
              rel="stylesheet">
        <!-- Bootstrap Datepicker CSS -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"
              rel="stylesheet">
        <!-- Bootstrap Timepicker CSS -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-timepicker/0.5.2/css/bootstrap-timepicker.min.css"
              rel="stylesheet">
        <link href="/public/css/studentStyles.css" rel="stylesheet">
    </head>
    <body>
        <header>
            <nav class="navbar navbar-expand-md">
                <div class="container-fluid d-flex">
                    <a class="navbar-brand" href="/">
                        <img src="/public/images/Monochrome_Modern_Technology_Black_Logo-removebg-preview - Copy.png"
                             alt="Logo"
                             width="180"
                             height="40"
                             class="d-inline-block align-text-top">
                    </a>
                    <button class="navbar-toggler"
                            type="button"
                            data-bs-toggle="collapse"
                            data-bs-target="#navbarNav"
                            aria-controls="navbarNav"
                            aria-expanded="false"
                            aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto">
                            <li class="nav-item">
                                <a class="nav-link active"
                                   aria-current="page"
                                   href="/students/user/{{user_id}}">Mentorship Opportunities</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/students/user/{{user_id}}/viewOpportunity">My Opportunities</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/about">Find a Mentor</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/about">My Goals</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle"
                                   href="#"
                                   id="navbarDropdown"
                                   role="button"
                                   data-bs-toggle="dropdown"
                                   aria-expanded="false">Profile</a>
                                <ul class="dropdown-menu dropdown-menu-end"
                                    aria-labelledby="navbarDropdown">
                                    <li>
                                        <a class="dropdown-item" href="/students/user/{{user_id}}/profile">My Profile</a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="/students/user/{{user_id}}/profile">Logout</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        {{#student}}
        <div class="container">
            {{#categories}}
            <h4>{{name}}</h4>
            <div class="row">
                {{#opportunities}}
                <div class="col-md-3">
                    <a href="#"
                       class="card-link"
                       data-toggle="modal"
                       data-target="#opportunityModal{{_id}}">
                        <div class="card mt-5 ml-3 mr-3" data-opportunity-id="{{_id}}">
                            <img class="card-img-top"
                                 src="{{image}}"
                                 alt="Card image cap"
                                 height="200"
                                 width="200">
                            <div class="card-body">
                                <h5 class="card-title">{{title}}</h5>
                                <p class="card-text mt-2">CATEGORY</p>
                                <p class="card-text">
                                    <small class="text">{{categoryName}}</small>
                                </p>
                                <p class="card-text mt-2">DESCRIPTION</p>
                                <p class="card-text">
                                    <small class="text">{{description}}</small>
                                </p>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- Opportunity Modal -->
                <div class="modal fade"
                     id="opportunityModal{{_id}}"
                     tabindex="-1"
                     role="dialog"
                     aria-labelledby="opportunityModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-dialog-scrollable modal-lg">" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <a href="/mentors-profile">View Mentors' Profile</a>
                                <button type="button"
                                        class="close"
                                        data-bs-dismiss="modal"
                                        aria-label="Close">
                                    <span aria-hidden="true">x</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="container">
                                    <label>Opportunity Title</label>
                                    <h6 class="modal-title" id="opportunityModalLabel{{_id}}">{{title}}</h6>
                                    <hr>
                                    <div class="side-label">
                                        <label>Category</label>
                                        <p class="bordered-value">{{categoryName}}</p>
                                    </div>
                                    <div class="side-label">
                                        <label>Opportunity Image</label>
                                        <img src="{{image}}" height="100" width="100" alt="opportunity-image">
                                    </div>
                                    <div class="side-label">
                                        <label>Description</label>
                                        <p class="bordered-value">{{description}}</p>
                                    </div>
                                    <div class="side-label">
                                        <label>Mentorship Objectives</label>
                                        <ul class="bordered-value">
                                            {{#obj}}
                                            <li>{{.}}</li>
                                        {{/obj}}
                                    </ul>
                                </div>
                                <div class="side-label">
                                    <label>Duration</label>
                                    <p class="bordered-value">{{duration}}</p>
                                    <label>Session Duration</label>
                                    <p class="bordered-value">{{sessionDuration}}</p>
                                </div>
                                <form action="/students/user/{{user_id}}/opportunityDetails/{{_id}}"
                                      method="post">
                                    <label for="mentorSelect">Select a mentor:</label>
                                    <select id="mentorSelect" name="mentorSelect">
                                        {{#mentorAvailability}}
                                        <option value="{{mentorName}}">{{mentorName}}</option>
                                    {{/mentorAvailability}}
                                </select>
                                <div class="mb-3">
                                    <label for="datepicker" class="form-label">Select a date:</label>
                                    <input type="text" id="datepicker" name="datepicker" class="form-control">
                                </div>
                                <div class="mb-3">
                                    <label for="timepicker" class="form-label">Select a time:</label>
                                    <input type="text" id="timepicker" name="timepicker" class="form-control">
                                </div>
                                <div class="side-label">
                                    <label>Schedule a Meeting</label>
                                    <button type="submit" class="schedule-button">Schedule</button>
                                </div>
                            </form>
                            <a href="/students/user/{{user_id}}/addOpportunity/{{_id}}"
                               class="btn btn-primary">Add Opportunity</a>
                        </div>
                    </div>
                </div>
            </>
        </div>
        <!-- End Opportunity Modal -->
    {{/opportunities}}
</div>
{{/categories}}
</div>
{{/student}}
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Bootstrap JS Bundle (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Bootstrap Datepicker -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
<!-- Bootstrap Timepicker -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-timepicker/0.5.2/js/bootstrap-timepicker.min.js"></script>
<!-- Your script block for initialization -->
<script>
$(document).ready(function() {
   // Handle click event on card link
   $('.card-link').on('click', function(e) {
     e.preventDefault(); // Prevent the default action of the link
     var targetModal = $(this).attr('data-target'); // Get the target modal ID from the link's data-target attribute
     $(targetModal).modal('show'); // Show the corresponding modal
   });
 });


    $(document).ready(function() {
        try {
            $('#date').datepicker({
                format: 'yyyy-mm-dd',
                autoclose: true,
                todayHighlight: true
            });

            $('#time').timepicker({
                minuteStep: 1,
                showMeridian: false,
                explicitMode: true
            });
        } catch (error) {
            console.error('Initialization error:', error);
        }
    });
</script>
</body>
</html>
