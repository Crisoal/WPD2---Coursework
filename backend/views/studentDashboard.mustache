<!DOCTYPE html>
<html>
<head>
   <title>Student Dashboard</title>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <!-- Container wrapper -->
  <div class="container-fluid">
    <!-- Toggle button -->
    <button
      class="navbar-toggler"
      type="button"
      data-mdb-toggle="collapse"
      data-mdb-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <i class="fas fa-bars"></i>
    </button>

    <!-- Collapsible wrapper -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <!-- Navbar brand -->
      <a class="navbar-brand mt-2 mt-lg-0" href="#">
        <img
          src="https://mdbcdn.b-cdn.net/img/logo/mdb-transaprent-noshadows.webp"
          height="15"
          alt="MDB Logo"
          loading="lazy"
        />
      </a>
      <!-- Left links -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="/students">Opportunities</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/students/user/{{user_id}}/viewOpportunity">My Opportunities</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Projects</a>
        </li>
      </ul>
      <!-- Left links -->
    </div>
    <!-- Collapsible wrapper -->

    <!-- Right elements -->
    <div class="d-flex align-items-center">
      <!-- Icon -->
      {{! <a class="text-reset me-3" href="#">
        <i class="fas fa-shopping-cart"></i>
      </a> }}

      <!-- Notifications -->
      <div class="dropdown">
        <a
          class="text-reset me-3 dropdown-toggle hidden-arrow"
          href="#"
          id="navbarDropdownMenuLink"
          role="button"
          data-mdb-toggle="dropdown"
          aria-expanded="false"
        >
          <i class="fas fa-bell"></i>
          <span class="badge rounded-pill badge-notification bg-danger">1</span>
        </a>
        <ul
          class="dropdown-menu dropdown-menu-end"
          aria-labelledby="navbarDropdownMenuLink"
        >
          <li>
            <a class="dropdown-item" href="#">Some news</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Another news</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Something else here</a>
          </li>
        </ul>
      </div>
      <!-- Avatar -->
      <div class="dropdown">
        <a
          class="dropdown-toggle d-flex align-items-center hidden-arrow"
          href="#"
          id="navbarDropdownMenuAvatar"
          role="button"
          data-mdb-toggle="dropdown"
          aria-expanded="false"
        >
          <img
            src="https://mdbcdn.b-cdn.net/img/new/avatars/2.webp"
            class="rounded-circle"
            height="25"
            alt="Black and White Portrait of a Man"
            loading="lazy"
          />
        </a>
        <ul
          class="dropdown-menu dropdown-menu-end"
          aria-labelledby="navbarDropdownMenuAvatar"
        >
          <li>
            <a class="dropdown-item" href="#">My profile</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Settings</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Logout</a>
          </li>
        </ul>
      </div>
    </div>
    <!-- Right elements -->
  </div>
  <!-- Container wrapper -->
</nav>
<!-- Navbar -->

{{#student}}
<div class="container">
   {{#categories}}
   <h4>{{name}}</h4>
   <div class="row">
       {{#opportunities}}
       <div class="col-md-4">
           <div class="card" data-opportunity-id="{{_id}}">
               <div class="card-body">
                   <h5 class="card-title">{{title}}</h5>
                   <p class="card-text">{{description}}</p>
               </div>
           </div>
       </div>
       <!-- Opportunity Modal -->
       <div class="modal fade" id="opportunityModal{{_id}}" tabindex="-1" role="dialog" aria-labelledby="opportunityModalLabel{{_id}}" aria-hidden="true">
           <div class="modal-dialog" role="document">
               <div class="modal-content">
                   <div class="modal-header">
                       <h6 class="modal-title" id="opportunityModalLabel{{_id}}">{{title}}</h6>
                       <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                           <span aria-hidden="true">&times;</span>
                       </button>
                   </div>
                   <div class="modal-body">
                       <p>{{description}}</p>
                       <a href="/students/user/{{user_id}}/addOpportunity/{{_id}}" class="btn btn-primary">Add Opportunity</a>
                   </div>
                
               </div>
           </div>
       </div>
       <!-- End Opportunity Modal -->
       {{/opportunities}}
   </div>
   {{/categories}}

   </div>
   {{/student}}

   <script>
       document.addEventListener("DOMContentLoaded", function() {
    const cards = document.querySelectorAll(".card");

    cards.forEach(function(card) {
        card.addEventListener("click", function() {
            const opportunityId = this.getAttribute("data-opportunity-id");
            const modal = document.querySelector(`#opportunityModal${opportunityId}`);
            const bootstrapModal = new bootstrap.Modal(modal);

            // Close Button
            const closeButton = modal.querySelector(".close");
            closeButton.addEventListener("click", function() {
                bootstrapModal.hide(); // Close the modal
            });

            bootstrapModal.show();
        });
    });
});
   </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>